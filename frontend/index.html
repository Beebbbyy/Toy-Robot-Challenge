<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Toy Robot Simulator - Control a robot on a 5x5 table top">
    <meta name="author" content="Toy Robot Challenge">
    <meta name="keywords" content="robot, simulator, toy robot, programming challenge">
    <title>Toy Robot Simulator</title>

    <!-- CSS - Design System -->
    <link rel="stylesheet" href="css/design-tokens.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/grid.css">
    <link rel="stylesheet" href="css/controls.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/dpad.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header" role="banner">
            <h1 id="appTitle">Toy Robot Simulator</h1>
            <p class="subtitle" aria-label="Application description">Navigate a robot on a 5x5 table top</p>
        </header>

        <!-- Main Content -->
        <main class="main-content" role="main">
            <!-- Grid Visualization -->
            <section class="grid-section" aria-labelledby="gridHeading">
                <h2 id="gridHeading">Table Top</h2>

                <!-- Grid View Controls -->
                <div class="grid-controls">
                    <div class="view-controls">
                        <button id="btnToggleIsometric" class="btn btn-secondary btn-small" aria-label="Toggle isometric view">
                            üéÆ Isometric
                        </button>
                        <button id="btnClearPath" class="btn btn-secondary btn-small" aria-label="Clear path trail">
                            üßπ Clear Path
                        </button>
                    </div>
                    <div class="zoom-controls">
                        <button id="btnZoomOut" class="btn btn-secondary btn-small" aria-label="Zoom out">
                            üîç‚ûñ
                        </button>
                        <span id="zoomLevel" class="zoom-level">100%</span>
                        <button id="btnZoomIn" class="btn btn-secondary btn-small" aria-label="Zoom in">
                            üîç‚ûï
                        </button>
                    </div>
                </div>

                <div id="gridContainer" class="grid-container zoom-100" role="grid" aria-label="5x5 table top grid for robot navigation">
                    <!-- Grid will be dynamically generated by JavaScript -->
                </div>
                <div class="grid-info" role="status" aria-live="polite" aria-atomic="true">
                    <p><strong>Robot Position:</strong> <span id="robotPosition" aria-label="Current robot position">Not placed</span></p>
                    <p><strong>Robot Direction:</strong> <span id="robotDirection" aria-label="Current robot facing direction">-</span></p>
                </div>
            </section>

            <!-- Control Panel -->
            <section class="control-section" aria-labelledby="controlHeading">
                <h2 id="controlHeading">Control Panel</h2>

                <!-- Command Buttons -->
                <div class="button-group" role="group" aria-label="Robot control commands">
                    <div class="placement-controls">
                        <h3 id="placeHeading">üéÆ Place Robot</h3>
                        <div class="input-group" role="group" aria-labelledby="placeHeading">
                            <label for="placeX">X:</label>
                            <input type="number" id="placeX" name="placeX" min="0" max="4" value="0"
                                   aria-label="X coordinate (0-4)" aria-required="true">

                            <label for="placeY">Y:</label>
                            <input type="number" id="placeY" name="placeY" min="0" max="4" value="0"
                                   aria-label="Y coordinate (0-4)" aria-required="true">

                            <label for="placeF">Direction:</label>
                            <select id="placeF" name="placeF" aria-label="Facing direction" aria-required="true">
                                <option value="NORTH">‚¨ÜÔ∏è NORTH</option>
                                <option value="EAST">‚û°Ô∏è EAST</option>
                                <option value="SOUTH">‚¨áÔ∏è SOUTH</option>
                                <option value="WEST">‚¨ÖÔ∏è WEST</option>
                            </select>

                            <button id="btnPlace" class="btn btn-place" aria-label="Place robot at specified position">
                                üìç PLACE
                            </button>
                        </div>
                    </div>

                    <div class="movement-controls">
                        <h3 id="movementHeading">üïπÔ∏è Game Controls</h3>

                        <!-- D-Pad Style Control -->
                        <div class="dpad-container" role="group" aria-label="Directional controls">
                            <div class="dpad">
                                <button id="btnMove" class="dpad-btn dpad-up btn-move" aria-label="Move robot forward (Arrow Up)">
                                    <span class="dpad-icon">‚¨ÜÔ∏è</span>
                                    <span class="dpad-label">MOVE</span>
                                </button>
                                <button id="btnLeft" class="dpad-btn dpad-left btn-rotate" aria-label="Rotate left (Arrow Left)">
                                    <span class="dpad-icon">‚¨ÖÔ∏è</span>
                                    <span class="dpad-label">LEFT</span>
                                </button>
                                <div class="dpad-center">
                                    <span class="dpad-center-icon">ü§ñ</span>
                                </div>
                                <button id="btnRight" class="dpad-btn dpad-right btn-rotate" aria-label="Rotate right (Arrow Right)">
                                    <span class="dpad-icon">‚û°Ô∏è</span>
                                    <span class="dpad-label">RIGHT</span>
                                </button>
                            </div>
                        </div>

                        <p class="keyboard-hint">üí° Tip: Use arrow keys on keyboard!</p>
                    </div>

                    <div class="action-controls">
                        <h3 id="actionHeading">‚ö° Actions</h3>
                        <div class="btn-row" role="group" aria-labelledby="actionHeading">
                            <button id="btnReport" class="btn btn-report btn-large" aria-label="Report current robot position">
                                üìä REPORT
                            </button>
                            <button id="btnReset" class="btn btn-reset btn-large" aria-label="Reset robot to initial state">
                                üîÑ RESET
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Command Input -->
                <div class="command-input-section">
                    <h3 id="commandInputHeading">Command Input</h3>
                    <div class="input-group" role="group" aria-labelledby="commandInputHeading">
                        <label for="commandInput" class="visually-hidden">Command text input</label>
                        <input type="text" id="commandInput" name="commandInput"
                               placeholder="Enter command (e.g., PLACE 0,0,NORTH)"
                               aria-label="Enter robot command"
                               aria-describedby="commandHelp" />
                        <button id="btnExecute" class="btn btn-execute" aria-label="Execute entered command">Execute</button>
                    </div>
                    <p id="commandHelp" class="help-text" role="note">
                        Commands: PLACE X,Y,F | MOVE | LEFT | RIGHT | REPORT
                    </p>
                </div>

                <!-- File Upload -->
                <div class="file-upload-section">
                    <h3 id="fileUploadHeading">Load Commands from File</h3>
                    <div class="input-group" role="group" aria-labelledby="fileUploadHeading">
                        <label for="fileInput" class="visually-hidden">Select command file</label>
                        <input type="file" id="fileInput" name="fileInput" accept=".txt"
                               aria-label="Select text file with commands" />
                        <button id="btnLoadFile" class="btn btn-file" aria-label="Load and execute commands from selected file">Load File</button>
                    </div>
                </div>
            </section>

            <!-- Command History Section -->
            <section class="history-section" aria-labelledby="historyHeading">
                <h2 id="historyHeading">Command History</h2>
                <div class="history-controls">
                    <button id="btnClearHistory" class="btn btn-clear" aria-label="Clear command history">Clear History</button>
                    <button id="btnToggleHistory" class="btn btn-secondary" aria-label="Toggle history visibility" aria-expanded="true">
                        <span id="toggleHistoryText">Hide</span>
                    </button>
                </div>
                <div id="historyContainer" class="history-container" role="log" aria-live="polite" aria-relevant="additions">
                    <p class="placeholder">Command history will appear here...</p>
                </div>
            </section>

            <!-- Output Section -->
            <section class="output-section" aria-labelledby="outputHeading">
                <h2 id="outputHeading">Output</h2>
                <div id="outputContainer" class="output-container" role="log" aria-live="polite" aria-relevant="additions">
                    <p class="placeholder">Command results will appear here...</p>
                </div>
                <button id="btnClearOutput" class="btn btn-clear" aria-label="Clear output console">Clear Output</button>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer" role="contentinfo">
            <p>&copy; 2025 Toy Robot Simulator | Phase 3 Frontend</p>
            <p class="accessibility-info">
                <small>Designed with accessibility in mind. Screen reader compatible.</small>
            </p>
        </footer>
    </div>

    <!-- Skip to main content link for accessibility -->
    <a href="#gridHeading" class="skip-link">Skip to main content</a>

    <!-- JavaScript Modules -->
    <script src="js/theme.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
